!function(t){var e=function(e,a,n){var r,l=new Date,o=l.getDate(),s=l.getMonth(),u=l.getFullYear(),p=o,i=s,c=u,d=n,f=null,h=null,y={posts:[],prev:null,next:null},g="en";(r=e)&&"undefined"!=typeof calLanguages&&calLanguages[r]&&(g=r);var v=t.extend({},t.fn.aCalendar.defaults,"undefined"==typeof calLanguages?{}:calLanguages[g],a);function m(){i<11?i++:(i=0,c++),T()}function x(){i>0?i--:(i=11,c--),T()}function M(t){t&&(c=t.getFullYear(),i=t.getMonth(),T())}function k(){v.single?null!=v.url&&""!=v.url&&(null===f&&t.ajax({url:v.url,async:!1,success:function(t){f=t,D(Object.keys(f))}}),null!==f&&w()&&(y.posts=f[c+"-"+(i+1)])):function(){null===h&&t.ajax({url:v.root+"list.json",async:!1,success:function(t){D(t)}});w()&&t.ajax({url:v.root+c+"-"+(i+1)+".json",async:!1,success:function(t){y.posts=t}})}()}function D(t){h=t.map((function(t){var e=t.split("-");return new Date(Date.UTC(+e[0],+e[1]-1))}))}function w(){var t=Date.UTC(c,i);if(null===h||0===h.length)return!1;if(0===y.posts.length&&(null===y.prev&&null!==y.next&&y.next.getTime()>t||null===y.next&&null!==y.prev&&y.prev.getTime()<t))return!1;y.posts=[];for(var e=0;e<h.length;e++){var a=h[e].getTime();if(t===a)return y.prev=0===e?null:h[e-1],y.next=e===h.length-1?null:h[e+1],!0;if(t<a){y.prev=0===e?null:h[e-1],y.next=h[e];break}y.prev=h[e],y.next=null}return!1}function C(t,e){var a={"LMM+":v.months[t.getMonth()],"MM+":t.getMonth()+1};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,"LMM+"===n?a[n]:("00"+a[n]).substr((""+a[n]).length)));return e}function T(){k();var e=new Date(c,i,1).getDay()-v.weekOffset;e<=0&&(e=6- -1*(e+1));var a=new Date(c,i+1,0).getDate(),n=new Date(c,i,0).getDate()-e+1,r=t("<div/>").addClass("cal-head"),l=t("<div/>"),o=t("<div/>"),f=t("<div/>").addClass("cal-title");o.html(v.headArrows.previous),l.html(v.headArrows.next),curDate=new Date(Date.UTC(c,i)),0===y.posts.length?f.html(C(curDate,v.titleFormat)):(cTitleLink=t("<a/>").attr("onclick",`pjax.loadUrl('${C(curDate,v.titleLinkFormat)}')`).attr("title",C(curDate,v.postsMonthTip)).html(C(curDate,v.titleFormat)),f.html(cTitleLink)),o.on("click",x),l.on("click",m),r.append(o),r.append(f),r.append(l);for(var h=t("<table/>").addClass("cal"),g=v.weekOffset,D=t("<thead/>"),w=t("<tr/>"),T=0;T<7;T++){g>6&&(g=0);var b=t("<th/>").attr("scope","col").attr("title",v.dayOfWeek[g]);b.html(v.dayOfWeekShort[g]),w.append(b),g++}D.append(w),h.append(D);var L=t("<tfoot/>"),F=t("<tr/>"),j=t("<td/>").attr("colspan",3),O=t("<td/>").html("&nbsp;"),A=t("<td/>").attr("colspan",3);y.prev&&j.html(v.footArrows.previous+v.months[y.prev.getMonth()]).addClass("cal-foot").attr("title",C(y.prev,v.postsMonthTip)),y.next&&A.html(v.months[y.next.getMonth()]+v.footArrows.next).addClass("cal-foot").attr("title",C(y.next,v.postsMonthTip)),j.on("click",(function(){M(y.prev)})),A.on("click",(function(){M(y.next)})),F.append(j),F.append(O),F.append(A),L.append(F);var S=t("<tbody/>"),$=1,W=1;for(T=0;T<6;T++){for(var U=t("<tr/>"),E=0;E<7;E++){var R=t("<td/>");if(7*T+E<e)R.addClass("cal-gray"),R.html(n++);else if($<=a){$==p&&s==i&&u==c&&R.addClass("cal-today");for(var J={num:0,keys:[]},Y=0;Y<y.posts.length;Y++){new Date(Date.parse(y.posts[Y].date)).getDate()==$&&(J.keys[J.num++]=Y)}if(0!==J.num){var N=J.keys[0],z=t("<a>").attr("onclick",`pjax.loadUrl('${y.posts[N].link}')`).attr("title",y.posts[N].title).html($++);R.append(z)}else R.html($++)}else R.addClass("cal-gray"),R.html(W++);U.append(R)}S.append(U)}h.append(D),h.append(L),h.append(S),t(d).html(r),t(d).append(h)}return"/"!==v.root[0]&&(v.root="/"+v.root),"/"!==v.root[v.root.length-1]&&(v.root+="/"),T()};t.fn.aCalendar=function(a,n){return this.each((function(){return e(a,n,t(this))}))},t.fn.aCalendar.defaults={months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["S","M","T","W","T","F","S"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],postsMonthTip:"Posts published in LMM yyyy",titleFormat:"yyyy LMM",titleLinkFormat:"/archives/yyyy/MM/",headArrows:{previous:'<span class="cal-prev"></span>',next:'<span class="cal-next"></span>'},footArrows:{previous:"« ",next:" »"},weekOffset:0,single:!0,root:"/calendar/",url:"/calendar.json"}}(jQuery),$(document).ready((function(){$("#calendar").aCalendar("zh-CN")}));